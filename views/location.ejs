<!-- <html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enable Location</title>
    <link rel="stylesheet" href="/stylesheets/location.css">
</head>

<body>

    <script>
        // Check if geolocation is supported by the browser
        if ('geolocation' in navigator) {
            // Get the user's current location
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;

                    // Send location data to the backend
                    fetch('/submitLocation', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ latitude, longitude }),
                    })
                        .then(response => response.json())
                        .then(data => {
                            console.log('Success:', data);
                        })
                        .catch((error) => {
                            console.error('Error:', error);
                        });
                },
                (error) => {
                    console.error('Error getting location:', error);
                }
            );
        } else {
            console.error('Geolocation is not supported by this browser.');
        }
    </script>


    <form method="post">
        <button type="submit" id="btnSubmit">Register</button>
    </form>


</body>

</html> -->
<!-- 
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enable Location</title>
    <link rel="stylesheet" href="/stylesheets/location.css">
</head>

<body>

   <script>
        // Function to enable the submit button
        function enableSubmitButton() {
            const btnSubmit = document.getElementById('btnSubmit');
            btnSubmit.removeAttribute('disabled');
            console.log('Submit button enabled.');
        }

        // Check if geolocation is supported by the browser
        if ('geolocation' in navigator) {
            // Get the user's current location
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    enableSubmitButton(); 
                    // Send location data to the backend
                    fetch('/submitLocation', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ latitude, longitude }),
                        
                    })
                        .then(response => {
                            if (!response.ok) {
                                throw new Error('Network response was not ok');
                            }
                            return response.json();
                        })
                        .then(data => {
                            console.log('Success:', data);
                            enableSubmitButton(); 
                        })
                        .catch((error) => {
                            console.error('Error:', error);
                        });
                },
                (error) => {
                    console.error('Error getting location:', error);
                }
            );
        } else {
            console.error('Geolocation is not supported by this browser.');
        }
    </script>

    <form method="post">
        <button type="submit" id="btnSubmit" disabled>Enable Location</button>
    </form>

</body>

</html> -->

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enable Location</title>
    <link rel="stylesheet" href="/stylesheets/location.css">
</head>

<body>

    <script>
        // Function to enable the submit button
        function enableSubmitButton() {
            const btnSubmit = document.getElementById('btnSubmit');
            btnSubmit.removeAttribute('disabled');
            console.log('Submit button enabled.');
        }

        // Check if geolocation is supported by the browser
        if ('geolocation' in navigator) {
            // Get the user's current location
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;

                    // Set latitude and longitude in hidden fields
                    document.getElementById('latitude').value = latitude;
                    document.getElementById('longitude').value = longitude;

                    enableSubmitButton();
                },
                (error) => {
                    console.error('Error getting location:', error);
                }
            );
        } else {
            console.error('Geolocation is not supported by this browser.');
        }
    </script>

    <form method="post" action="/submitLocation">
        <input type="hidden" name="latitude" id="latitude">
        <input type="hidden" name="longitude" id="longitude">
        <button type="submit" id="btnSubmit" disabled>Enable Location</button>
    </form>

</body>

</html>